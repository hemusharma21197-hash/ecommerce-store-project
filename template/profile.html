{% extends "base.html" %}

{% block title %}My Account â€“ ShopEasy{% endblock %}

{% block content %}

<div class="account-header">
    <h1>Your Account</h1>
    <p>Manage your profile, orders, and shopping activity</p>
</div>

<div class="account-grid">

    <!-- ACCOUNT CARD -->
    <div class="account-card">
        <h3><i class="fas fa-user-circle"></i> Profile Information</h3>

        <div class="profile-box">
            <img src="https://semantic-ui.com/images/avatar2/large/kristy.png" class="profile-img">

            <div class="profile-details">
                <p><strong>Name:</strong> {{ user.name }}</p>
                <p><strong>Email:</strong> {{ user.email }}</p>
                <p><strong>Member Since:</strong> {{ user.id }} days ago</p>
            </div>
        </div>

        <a href="{{ url_for('products') }}" class="primary-btn">Continue Shopping</a>
    </div>

    <!-- ORDERS CARD -->
    <div class="account-card">
        <h3><i class="fas fa-box"></i> Your Orders</h3>
        <p>You have <strong>{{ orders|length }}</strong> orders</p>

        <a href="{{ url_for('view_orders') }}" class="secondary-btn">
            View Order History
        </a>
    </div>

    <!-- CART CARD -->
    <div class="account-card">
        <h3><i class="fas fa-shopping-cart"></i> Shopping Cart</h3>

        <p>Items in Cart:
            <strong>
                {% if session.get('cart') %} {{ session['cart']|length }} {% else %}0{% endif %}
            </strong>
        </p>

        <a href="{{ url_for('view_cart') }}" class="secondary-btn">
            Go to Cart
        </a>
    </div>

    <!-- LOGOUT CARD -->
    <div class="account-card">
        <h3><i class="fas fa-sign-out-alt"></i> Logout</h3>
        <p>Sign out of your ShopEasy account</p>

        <a href="{{ url_for('logout') }}" class="danger-btn">
            Logout
        </a>
    </div>

</div>

<!-- RECENT ORDERS SECTION -->
<div class="recent-orders-section">

    <h2>Recent Orders</h2>

    {% if orders %}
    <div class="recent-orders-list">

        {% for order in orders[:3] %}
        <div class="recent-order-card">

            <div class="order-main-info">
                <h4>Order #{{ order.order_id }}</h4>
                <span class="status-badge {{ order.status|lower }}">{{ order.status }}</span>
            </div>

            <p class="order-date">Placed on {{ order.date }}</p>
            <p class="order-total">Total: ${{ "%.2f"|format(order.total) }}</p>

        </div>
        {% endfor %}

    </div>

    {% if orders|length > 3 %}
    <div style="text-align:center; margin-top:20px;">
        <a href="{{ url_for('view_orders') }}" class="primary-btn">View All Orders</a>
    </div>
    {% endif %}

    {% else %}
    <div class="empty-orders">
        <i class="fas fa-box-open"></i>
        <h3>No Orders Yet</h3>
        <a href="{{ url_for('products') }}" class="primary-btn">Start Shopping</a>
    </div>
    {% endif %}

</div>

<!-- ===================== STYLES ===================== -->
<style>

.account-header {
    text-align: center;
    margin-bottom: 25px;
}
.account-header h1 {
    font-size: 2.2rem;
}
.account-header p {
    color: #555;
}

.account-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 25px;
    margin-bottom: 40px;
}

.account-card {
    background: white;
    padding: 25px;
    border-radius: 12px;
    border: 1px solid #ddd;
}
.account-card h3 {
    margin-bottom: 10px;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    gap: 8px;
}
.account-card p {
    margin-bottom: 15px;
    color: #555;
}

.primary-btn,
.secondary-btn,
.danger-btn {
    display: inline-block;
    padding: 10px 18px;
    border-radius: 6px;
    text-decoration: none;
    font-weight: bold;
    text-align: center;
}

.primary-btn {
    background: #febd69;
    color: #111;
}
.primary-btn:hover {
    background: #f3a847;
}

.secondary-btn {
    background: #e8e8e8;
    color: #333;
}
.secondary-btn:hover {
    background: #d6d6d6;
}

.danger-btn {
    background: #ff5e57;
    color: white;
}
.danger-btn:hover {
    background: #e14c46;
}

/* PROFILE BOX */
.profile-box {
    display: flex;
    gap: 15px;
    margin-bottom: 15px;
}
.profile-img {
    width: 80px;
    height: 80px;
    border-radius: 50%;
}
.profile-details p {
    margin: 3px 0;
}

/* RECENT ORDERS */
.recent-orders-section h2 {
    margin-bottom: 15px;
}
.recent-orders-list {
    display: grid;
    gap: 20px;
}
.recent-order-card {
    background: white;
    padding: 20px;
    border-radius: 10px;
    border: 1px solid #ddd;
}
.order-main-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* Status colors */
.status-badge {
    padding: 6px 12px;
    border-radius: 5px;
    font-size: 0.85rem;
    font-weight: bold;
}
.status-badge.delivered { background: #d4edda; color: #155724; }
.status-badge.pending { background: #fff3cd; color: #856404; }
.status-badge.processing { background: #cce5ff; color: #004085; }

.order-total {
    font-size: 1.1rem;
    font-weight: bold;
}

/* Empty Orders */
.empty-orders {
    text-align: center;
    padding: 2rem;
}
.empty-orders i {
    font-size: 3rem;
    color: #ccc;
}

@media(max-width: 600px) {
    .profile-box {
        flex-direction: column;
        text-align: center;
    }
}

</style>

{% endblock %}
